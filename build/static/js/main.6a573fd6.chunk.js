(this["webpackJsonpcollect-data"]=this["webpackJsonpcollect-data"]||[]).push([[0],{253:function(e,t,a){"use strict";a.r(t);var n,s,i,o,c,l,r,p=a(0),d=a.n(p),u=a(24),h=a.n(u),j=a(26),f=a(28),b=a(33),O=a(32),x=(a.p,a(64)),m=a(30),g=a(262),v=a(263),S=a(264),y=(a.p,a(7)),w=function(e){Object(b.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={collapsed:!1},n}return Object(f.a)(a,[{key:"toggleCollapsed",value:function(){this.setState({collapsed:!this.state.collapsed})}},{key:"render",value:function(){var e=this;return Object(y.jsx)("div",{className:"Menu",style:{width:this.state.collapsed?80:256},children:Object(y.jsxs)(x.a,{defaultSelectedKeys:["1"],mode:"inline",theme:"dark",inlineCollapsed:this.state.collapsed,children:[Object(y.jsx)(x.a.Item,{icon:Object(y.jsx)(g.a,{}),children:"Generate License File"},"1"),Object(y.jsx)(m.a,{type:"primary",onClick:function(){e.toggleCollapsed()},style:{marginBottom:16},children:d.a.createElement(this.state.collapsed?v.a:S.a)})]})})}}]),a}(d.a.Component),k=a(43),C=(a.p,a(149)),L=a(71),N=a(257),F=a(265),I=(a.p,a(85)),M=a.n(I),P=a(31),U=N.a.Dragger,D=Object(P.a)(n=function(e){Object(b.a)(a,e);var t=Object(O.a)(a);function a(e){var n;Object(j.a)(this,a),n=t.call(this,e);var s=Object(L.a)(n);return n.state={multiple:!0,name:"files",showUploadList:{showDownloadIcon:!1,showRemoveIcon:!1},fileList:n.props.licenseInfoStore.fileList,fileMap:n.props.licenseInfoStore.fileMap,action:"",uploading:!1,beforeUpload:function(e){var t=s.state.fileMap;return t[e.name]?t[e.name].lastModifiedDate<e.lastModifiedDate&&(t[e.name]=e,s.setState({fileMap:t})):(t[e.name]=e,s.setState({fileMap:t})),s.setState((function(t){return{fileList:[].concat(Object(C.a)(t.fileList),[e])}}),(function(){s.props.licenseInfoStore.fileList=n.state.fileList,console.log(s.props.licenseInfoStore)})),!1}},n}return Object(f.a)(a,[{key:"render",value:function(){var e=this;return Object(y.jsxs)("div",{className:"CollectData",children:[Object(y.jsxs)("form",{action:"/download",method:"post",encType:"multipart/form-data",onSubmit:function(e){console.log(e)},children:[Object(y.jsx)("div",{style:{textAlign:"center"},children:Object(y.jsx)("h2",{children:"Upload the license information file"})}),Object(y.jsx)("div",{children:Object(y.jsxs)(U,Object(k.a)(Object(k.a)({},this.state),{},{accept:".htm,.html",children:[Object(y.jsx)("p",{className:"ant-upload-drag-icon",children:Object(y.jsx)(F.a,{})}),Object(y.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),Object(y.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files"})]}))})]}),Object(y.jsx)("div",{className:"action-button",children:Object(y.jsx)(m.a,{type:"primary",onClick:function(){e.props.nextStep()},children:"Next"})})]})}}]),a}(d.a.Component))||n,E=a(258),B=a(261),A=(a.p,a(52)),R=N.a.Dragger,T=Object(A.a)(s=function(e){Object(b.a)(a,e);var t=Object(O.a)(a);function a(e){var n;Object(j.a)(this,a),(n=t.call(this,e)).setUploadBtnRef=function(e){n.state.UploadBtn=e};var s=Object(L.a)(n);return n.state={multiple:!1,enableNext:n.props.licenseInfoStore.validExcelFile,name:"excelFile",showUploadList:{showDownloadIcon:!1,showRemoveIcon:!1},errorMessage:"",fileList:[],excelFile:n.props.licenseInfoStore.excelFile,action:"",uploading:!1,beforeUpload:function(e){return s.setState((function(t){return{excelFile:e,fileList:[e]}}),(function(){s.props.licenseInfoStore.excelFile=e,console.log(s.props.licenseInfoStore),s.handleUpload()})),!1}},n.props.licenseInfoStore.excelFile&&n.props.licenseInfoStore.validExcelFile&&n.state.fileList.push(n.props.licenseInfoStore.excelFile),n}return Object(f.a)(a,[{key:"destroyAll",value:function(){E.a.destroyAll()}},{key:"handleUpload",value:function(){var e=this,t=new FormData;t.append("excelFile",this.state.excelFile),M()({url:"/checkExcelFile",method:"post",processData:!1,data:t,responseType:"json"}).then((function(t){if(console.log(t),200===t.status&&0===t.data.status)e.setState({enableNext:!0,errorMessage:""},(function(){e.props.licenseInfoStore.validExcelFile=!0}));else if(e.setState({enableNext:!1},(function(){e.props.licenseInfoStore.validExcelFile=!1})),t.data.message){var a=Object(y.jsx)("pre",{children:t.data.message});e.setState({errorMessage:a})}})).catch((function(t){console.log(t),e.setState({enableNext:!1,errorMessage:"Has internal server error, please check the log file."},(function(){e.props.licenseInfoStore.validExcelFile=!1}))}))}},{key:"downloadFile",value:function(){var e=this.props.licenseInfoStore,t=this;M()({url:"/downloadFile",method:"post",processData:!1,responseType:"blob"}).then((function(a){var n=a.data,s=new Blob([n]),i=e.fileName;if("download"in document.createElement("a")){var o=document.createElement("a");o.download=i,o.style.display="none",o.href=URL.createObjectURL(s),document.body.appendChild(o),o.click(),URL.revokeObjectURL(o.href),document.body.removeChild(o)}else navigator.msSaveBlob(s,i);t.props.homePageStore.closeLoading()})).catch((function(e){console.log(e),t.props.homePageStore.closeLoading()}))}},{key:"submit",value:function(){this.props.homePageStore.showLoading();var e=this,t=new FormData,a=this.props.licenseInfoStore;if(0!==a.fileList.length&&a.excelFile){for(var n in a.fileList){var s=a.fileList[n];t.append("files",s)}t.append("excelFile",a.excelFile),M()({url:"/download",method:"post",processData:!1,data:t}).then((function(t){console.log(t),e.downloadFile(),e.props.nextStep(3)})).catch((function(t){console.log(t),e.props.homePageStore.closeLoading()}))}else this.props.showMessage("Please confrim if upload the excel file and html file.")}},{key:"uploadExcel",value:function(e){if(console.log(e),this.state.UploadBtn.files.length){var t=this.state.UploadBtn.files[0];this.setState({excelFile:t,excelName:t.name})}}},{key:"render",value:function(){var e=this;return Object(y.jsxs)("div",{className:"ExcelUploadPage",children:[Object(y.jsxs)("form",{action:"/",method:"post",onSubmit:function(e){console.log(e)},children:[Object(y.jsx)("div",{style:{textAlign:"center"},children:Object(y.jsx)("h2",{children:"Upload the excel file"})}),Object(y.jsx)("div",{children:Object(y.jsxs)(R,Object(k.a)(Object(k.a)({},this.state),{},{accept:".xls,.xlsx",children:[Object(y.jsx)("p",{className:"ant-upload-drag-icon",children:Object(y.jsx)(F.a,{})}),Object(y.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),Object(y.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files"})]}))})]}),Object(y.jsx)("div",{children:this.state.errorMessage&&Object(y.jsx)(B.a,{message:this.state.errorMessage,type:"error"})}),Object(y.jsx)("div",{className:"action-button",children:Object(y.jsx)(m.a,{disabled:!this.state.enableNext,type:"primary",onClick:function(){e.submit()},children:"Next"})})]})}}]),a}(d.a.Component))||s,H=(a.p,a(259)),z=function(e){Object(b.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={},n}return Object(f.a)(a,[{key:"render",value:function(){return Object(y.jsx)("div",{className:"FinishPage",children:Object(y.jsx)(H.a,{status:"success",title:"Successfully upload license information file. Please check the excel if can be download!",subTitle:"Download file need takes 1-5 minutes, please wait.",extra:[Object(y.jsx)(m.a,{type:"primary",children:"Go Home"})]})})}}]),a}(d.a.Component),G=a(19),J=a(256),K=(a.p,function(e){Object(b.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={dataSource:[]},n}return Object(f.a)(a,[{key:"render",value:function(){var e=this;return Object(y.jsxs)("div",{className:"ConfirmPage",children:[Object(y.jsx)("div",{children:Object(y.jsx)("h1",{children:"Confrim need upload file"})}),Object(y.jsx)("div",{children:Object(y.jsx)(G.a,{children:Object(y.jsx)(J.a,{listStyle:{width:400,height:400},dataSource:this.state.dataSource,titles:["Upload file","Duplicate file"],render:function(e){return e.title}})})}),Object(y.jsx)("div",{className:"action-button",children:Object(y.jsx)(m.a,{type:"primary",onClick:function(){e.props.nextStep()},children:"Next"})})]})}}]),a}(d.a.Component)),_=a(260),q=function e(){Object(j.a)(this,e),this.fileList=[],this.fileMap={},this.excelFile=void 0,this.fileName="Company Software License.xlsx",this.validExcelFile=!1},Q=_.a.Step,V=new q,W=Object(A.a)(i=function(e){Object(b.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).props.homePageStore.showLoading(),n.state={current:0,maxCurrent:0},n}return Object(f.a)(a,[{key:"nextStep",value:function(e){this.setState({current:e,maxCurrent:e})}},{key:"onChange",value:function(e){e<=this.state.maxCurrent&&e!=this.state.current&&this.setState({current:e})}},{key:"getPageBycurrent",value:function(){var e=this,t={showMessage:this.props.showMessage,homePageStore:this.props.homePageStore,licenseInfoStore:V};switch(this.state.current){case 0:return Object(y.jsx)(D,Object(k.a)(Object(k.a)({},t),{},{nextStep:function(){return e.nextStep(1)}}));case 1:return Object(y.jsx)(K,Object(k.a)(Object(k.a)({},t),{},{nextStep:function(){return e.nextStep(2)}}));case 2:return Object(y.jsx)(T,Object(k.a)(Object(k.a)({},t),{},{nextStep:function(){return e.nextStep(3)}}));case 3:return Object(y.jsx)(z,{})}}},{key:"getStepStatus",value:function(e){return e<this.state.maxCurrent?"finish":e===this.state.maxCurrent?"process":"wait"}},{key:"render",value:function(){var e=this;return Object(y.jsxs)("div",{className:"MainPage",children:[Object(y.jsx)("div",{className:"step-content",children:this.getPageBycurrent()}),Object(y.jsx)("div",{className:"step-wrapper",children:Object(y.jsxs)(_.a,{type:"navigation",current:this.state.current,onChange:function(t){e.onChange(t)},className:"site-navigation-steps",children:[Object(y.jsx)(Q,{status:this.getStepStatus(0),title:"Upload license file"}),Object(y.jsx)(Q,{status:this.getStepStatus(1),title:"Confirm license file"}),Object(y.jsx)(Q,{status:this.getStepStatus(2),title:"Upload excel file"}),Object(y.jsx)(Q,{status:this.getStepStatus(3),title:"Done"})]})})]})}}]),a}(d.a.Component))||i,X=a(255),Y=a(144),Z=a(113),$=(a(246),a(17)),ee=new(o=function(){function e(){Object(j.a)(this,e),Object(Y.a)(this,"loading",c,this)}return Object(f.a)(e,[{key:"showLoading",value:function(){this.loading=!0}},{key:"closeLoading",value:function(){this.loading=!1}}]),e}(),c=Object(Z.a)(o.prototype,"loading",[$.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(Z.a)(o.prototype,"showLoading",[$.f],Object.getOwnPropertyDescriptor(o.prototype,"showLoading"),o.prototype),Object(Z.a)(o.prototype,"closeLoading",[$.f],Object.getOwnPropertyDescriptor(o.prototype,"closeLoading"),o.prototype),o),te=a(68),ae=(a(247),Object(A.a)(l=function(e){Object(b.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={},n}return Object(f.a)(a,[{key:"destroyAll",value:function(){E.a.destroyAll()}},{key:"showMessage",value:function(e){var t=E.a.confirm,a=this;t({icon:Object(y.jsx)(te.a,{}),content:Object(y.jsx)("div",{children:e}),onOk:function(){a.destroyAll()},onCancel:function(){a.destroyAll()}})}},{key:"render",value:function(){var e=this;return Object(y.jsxs)("div",{className:"HomePage",children:[Object(y.jsx)("div",{className:"menu-wrapper",children:Object(y.jsx)(w,{})}),Object(y.jsx)("div",{className:"contain-wrapper",children:Object(y.jsx)(W,{showMessage:function(t){e.showMessage(t)},homePageStore:ee})}),ee.loading&&Object(y.jsx)("div",{className:"loading",children:Object(y.jsx)(X.a,{size:"large",tip:"Loading..."})})]})}}]),a}(d.a.Component))||l),ne=Object(A.a)(r=function(e){Object(b.a)(a,e);var t=Object(O.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){return Object(y.jsx)("div",{id:"App_Conponent",className:"Application",children:Object(y.jsx)(ae,{})})}}]),a}(d.a.Component))||r,se=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,266)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,i=t.getLCP,o=t.getTTFB;a(e),n(e),s(e),i(e),o(e)}))};h.a.render(Object(y.jsx)(d.a.StrictMode,{children:Object(y.jsx)(ne,{})}),document.getElementById("app")),se()}},[[253,1,2]]]);
//# sourceMappingURL=main.6a573fd6.chunk.js.map